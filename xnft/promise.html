<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

	<div>promise 2017</div>
	 <div>
	 	then方法返回一个Promise，而它的行为与then中的回调函数的返回值有关：

如果then中的回调函数返回一个值，那么then返回的Promise将会成为接受状态，并且将返回的值作为接受状态的回调函数的参数值。
如果then中的回调函数抛出一个错误，那么then返回的Promise将会成为拒绝状态，并且将抛出的错误作为拒绝状态的回调函数的参数值。
如果then中的回调函数返回一个已经是接受状态的Promise，那么then返回的Promise也会成为接受状态，并且将那个Promise的接受状态的回调函数的参数值作为该被返回的Promise的接受状态回调函数的参数值。
如果then中的回调函数返回一个已经是拒绝状态的Promise，那么then返回的Promise也会成为拒绝状态，并且将那个Promise的拒绝状态的回调函数的参数值作为该被返回的Promise的拒绝状态回调函数的参数值。
如果then中的回调函数返回一个未定状态（pending）的Promise，那么then返回Promise的状态也是未定的，并且它的终态与那个Promise的终态相同；同时，它变为终态时调用的回调函数参数与那个Promise变为终态时的回调函数的参数是相同的。
		
	</div>

	<script>
   let p1 = new Promise(function(resolve, reject) {

     let arr=[1,2,4,5]
          var mapArr=arr.map((item)=>{
         	return  item*item
          })
    resolve(mapArr);
   // or
  // reject ("Error!");
 });

   p1.then(function(value) {
     console.log(value); // Success!
   }, function(reason) {
     console.log(reason); // Error!
   });


	 // then的链式调用
	 console.log(Promise)


    Promise.resolve("slf")
   .then(function (string) {
       return new Promise(function(resolve,reject){
       	setTimeout(function(){
       		string+="bar"
       		resolve(string)
       		console.log(string)
       	},1)
       })
   }).then(function (string) {
   	  setTimeout(function () {
   	  	  string +='baz'
   	  	  console.log(string)
   	  },1)
       return string
   })
 .then(function (string) {

	console.log(string,3)
 	
 })



	</script>
	
</body>
</html>